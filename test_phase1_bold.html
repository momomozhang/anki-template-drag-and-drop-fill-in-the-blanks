<!DOCTYPE html>
<html>
<head>
    <title>Phase 1: Bold Support Validation</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-case { border: 1px solid #ccc; margin: 15px 0; padding: 20px; }
        .result { background: #f0f8ff; padding: 10px; margin: 10px 0; }
        .success { color: green; font-weight: bold; }
        .error { color: red; font-weight: bold; }
    </style>
</head>
<body>
    <h1>Phase 1: Bold Support Validation</h1>
    <p><strong>Testing:</strong> Selective tag preservation in preserveParagraphBreaks function</p>

    <div class="test-case">
        <h3>Test 1: Bold Text Preservation</h3>
        <button onclick="testBoldPreservation()">Run Test</button>
        <div class="result" id="bold-result"></div>
    </div>

    <div class="test-case">
        <h3>Test 2: Structural Tag Removal</h3>
        <button onclick="testStructuralRemoval()">Run Test</button>
        <div class="result" id="structural-result"></div>
    </div>

    <div class="test-case">
        <h3>Test 3: Combined Test</h3>
        <button onclick="testCombined()">Run Test</button>
        <div class="result" id="combined-result"></div>
    </div>

    <script>
        // Test the new selective tag removal regex
        function testSelectiveTagRemoval(html) {
            // Simulate the new regex from Phase 1
            return html.replace(/<(?!\/?(?:b|strong)\b)[^>]*>/gi, '');
        }

        function testBoldPreservation() {
            var testHTML = 'This is <b>bold</b> and <strong>strong</strong> text.';
            var result = testSelectiveTagRemoval(testHTML);
            var expected = 'This is <b>bold</b> and <strong>strong</strong> text.';
            
            var success = result === expected;
            var resultDiv = document.getElementById('bold-result');
            
            resultDiv.innerHTML = 
                '<div class="' + (success ? 'success' : 'error') + '">' + 
                (success ? '✅ PASS' : '❌ FAIL') + '</div>' +
                '<strong>Input:</strong> ' + testHTML + '<br>' +
                '<strong>Expected:</strong> ' + expected + '<br>' +
                '<strong>Actual:</strong> ' + result + '<br>';
        }

        function testStructuralRemoval() {
            var testHTML = '<div>Text in <p>paragraphs</p> should lose <span>structure</span></div>';
            var result = testSelectiveTagRemoval(testHTML);
            var expected = 'Text in paragraphs should lose structure';
            
            var success = result === expected;
            var resultDiv = document.getElementById('structural-result');
            
            resultDiv.innerHTML = 
                '<div class="' + (success ? 'success' : 'error') + '">' + 
                (success ? '✅ PASS' : '❌ FAIL') + '</div>' +
                '<strong>Input:</strong> ' + testHTML + '<br>' +
                '<strong>Expected:</strong> ' + expected + '<br>' +
                '<strong>Actual:</strong> ' + result + '<br>';
        }

        function testCombined() {
            var testHTML = '<p>This <b>bold</b> text is in <div>structural</div> <strong>tags</strong>.</p>';
            var result = testSelectiveTagRemoval(testHTML);
            var expected = 'This <b>bold</b> text is in structural <strong>tags</strong>.';
            
            var success = result === expected;
            var resultDiv = document.getElementById('combined-result');
            
            resultDiv.innerHTML = 
                '<div class="' + (success ? 'success' : 'error') + '">' + 
                (success ? '✅ PASS' : '❌ FAIL') + '</div>' +
                '<strong>Input:</strong> ' + testHTML + '<br>' +
                '<strong>Expected:</strong> ' + expected + '<br>' +
                '<strong>Actual:</strong> ' + result + '<br>' +
                '<strong>Analysis:</strong> Bold formatting preserved, structural tags removed';
        }
    </script>
</body>
</html>